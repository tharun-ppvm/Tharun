const API_URL = 'http://localhost:3000/api/products';

async function loadProducts() {
  const res = await fetch(API_URL);
  const data = await res.json();
  const list = document.getElementById('productList');
  list.innerHTML = data.map(p => `
    <div class="product-card">
      <h3>${p.name}</h3>
      <p>${p.description}</p>
      <p>â‚¹${p.price}</p>
      <button class="delete-btn" onclick="del('${p._id}')">Delete</button>
    </div>
  `).join('');
}

document.getElementById('productForm').onsubmit = async e => {
  e.preventDefault();
  const name = nameInput.value, description = description.value, price = priceInput.value;
};

document.getElementById('productForm').addEventListener('submit', async e => {
  e.preventDefault();
  const name = document.getElementById('name').value;
  const description = document.getElementById('description').value;
  const price = document.getElementById('price').value;
  await fetch(API_URL, {
    method: 'POST', headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ name, description, price })
  });
  e.target.reset();
  loadProducts();
});

async function del(id) {
  await fetch(`${API_URL}/${id}`, { method: 'DELETE' });
  loadProducts();
}

loadProducts();
